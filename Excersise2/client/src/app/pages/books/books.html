<header class="intro-container courses">
  <div class="title-container courses">
    <h1>Book List</h1>

    <a class="book-see-all-btn" href="#book-menu">See all</a>

    <p>
      Browse our curated selection of Informatics books and choose the titles you want to explore.
      Use the filters to find books by topic and level, and open any book to view its details.
    </p>
  </div>

  <div class="tag-row books">
    <div class="tag">The</div>
    <div class="tag">Best</div>
    <div class="tag">Sellers</div>
  </div>

  <div class="slider-wrapper">
    <div class="card-carousel" id="prefered-books-wrapper">
      <a
        class="card"
        *ngFor="let book of proposed; trackBy: trackById"
        [routerLink]="['/book-details', book.bookId]"
      >
        <div class="card-info">
          <div class="tag-row">
            <div class="tag">{{ book.category }}</div>
            <div class="tag">{{ book.difficulty }}</div>
          </div>

          <h2>{{ book.title }}</h2>
          <p>{{ sliceWords(book.description, 26) }}</p>
        </div>

        <div class="card-img-cont">
          <img [src]="book.cover" [alt]="book.title" draggable="false" />
        </div>
      </a>
    </div>
  </div>
</header>

<section class="courses-page" id="book-menu">

  <app-filter-sidebar label="Books" [count]="filteredBooks.length">

    <div filters>
      <!-- CATEGORY -->
      <div class="filter-box">
        <span>Category</span>

        <div class="checkbox-wrapper" *ngFor="let cat of categoryOptions">
          <input
            class="inp-cbx"
            [id]="'cat-' + cat.value"
            type="checkbox"
            [value]="cat.value"
            (change)="onCategoryChange(cat.value, $event)"
          />
          <label class="cbx" [for]="'cat-' + cat.value">
            <span>
              <svg width="12" height="10" viewBox="0 0 12 10">
                <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
              </svg>
            </span>
            <p>{{ cat.label }}</p>
          </label>
        </div>
      </div>

      <!-- DIFFICULTY -->
      <div class="filter-box">
        <span>Difficulty</span>

        <div class="checkbox-wrapper" *ngFor="let lvl of levelOptions">
          <input
            class="inp-cbx"
            [id]="'diff-' + lvl.value"
            type="checkbox"
            [value]="lvl.value"
            (change)="onLevelChange(lvl.value, $event)"
          />
          <label class="cbx" [for]="'diff-' + lvl.value">
            <span>
              <svg width="12" height="10" viewBox="0 0 12 10">
                <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
              </svg>
            </span>
            <p>{{ lvl.label }}</p>
          </label>
        </div>
      </div>

      <!-- AVAILABLE -->
      <div class="filter-box">
        <div class="checkbox-wrapper">
          <input
            class="inp-cbx"
            id="filter-available"
            type="checkbox"
            (change)="onAvailableChange($event)"
          />
          <label class="cbx" for="filter-available">
            <span>
              <svg width="12" height="10" viewBox="0 0 12 10">
                <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
              </svg>
            </span>
            <p>Only available</p>
          </label>
        </div>
      </div>
    </div>

    <div grid class="course-grid" id="books-list">
      <p *ngIf="loading">Loading...</p>
      <p *ngIf="error">{{ error }}</p>

      <app-book-card
        *ngFor="let book of filteredBooks; trackBy: trackById"
        [book]="book"
      ></app-book-card>

      <p *ngIf="!loading && !error && filteredBooks.length === 0" style="color:white;">
        No books found.
      </p>
    </div>

  </app-filter-sidebar>

</section>